<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kispest Kertváros Karácsonyi Ablakok</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cinzel Decorative', serif;
      background-color: #031716;
      color: #fff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 20px;
    }

    header {
      margin-bottom: 20px;
    }

    header img {
      max-width: 200px;
      height: auto;
    }

    .description {
      max-width: 600px;
      margin: 20px auto;
      font-size: 1.2em;
      line-height: 1.6;
    }

    .map-container {
      width: 100%;
      max-width: 800px;
      height: 600px;
      margin: 20px auto;
      border-radius: 10px;
      overflow: hidden;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    .author {
      font-family: 'Great Vibes', cursive;
      font-size: 1.5em;
      margin-top: 20px;
      color: #6BA3BE;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Kispest Kertváros Karácsonyi Ablakok logó">
  </header>

  <div class="description">
    <h1>Kispest Kertváros Karácsonyi Ablakok</h1>
    <p>
      A Kispest Kertváros Karácsonyi Ablakok egy közösségi kezdeményezés, amely során minden adventi napra egy új ünnepi ablak díszíti a környéket. 
      Célunk, hogy a helyi lakosokat közelebb hozzuk egymáshoz, és közösen teremtsünk ünnepi hangulatot a városrészben.
    </p>
    <p>
      Látogasd meg a térképen kijelölt ablakokat, és élvezd az egyedi történeteket és meséket, amelyeket minden helyszínen megtalálsz!
    </p>
    <div class="author">Készítette: Komlósi Fanni</div>
  </div>

  <div class="map-container">
    <div id="map"></div>
  </div>
 <!-- Leaflet könyvtár -->
 
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
 

  <!-- Fő script -->
  
 <<script>
 
     // 1. Térkép inicializálása
  const map = L.map('map').setView([47.433657, 19.159633], 15.2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '© OpenStreetMap contributors'
}).addTo(map);


  // Aktuális dátum lekérése
const today = new Date('2023-12-10'); // Szimulált dátum: December 10.
const currentDay = today.getDate(); // Ez most 10-et ad vissza


const locations = [
  { 
    name: "1. Adventi Ablak", 
    coords: [47.43370819040602, 19.159680712132857], 
    address: "1194 Budapest, Brassó utca 36.", 
    story: `Egy kis gyertya lángra lobban,
Fénye száll az ablakodban.
Közeledik a karácsony,
Hétről hétre jobban várom.`,
    showOnDay: 1 
  },
  { 
    name: "2. Adventi Ablak", 
    coords: [47.432383912149504, 19.162714725625275], 
    address: "Beszterce utca 36.", 
    story: `Gyertyát gyújtunk advent este,
Fénye száll az égre messze.
Csillagként ragyog a szívünkben,
Karácsony vár örömünkben.`,
    showOnDay: 2 
  },
  { 
    name: "3. Adventi Ablak", 
    coords: [47.43671542605803, 19.15103296795398], 
    address: "1194 Bp Katona József utca 42.", 
    story: `Advent első gyertyájának
fénye most felragyog,
lágyan szól a csöndes ének,
és a szeretet körbefog.`,
    showOnDay: 3 
  },
  { 
    name: "4. Adventi Ablak", 
    coords: [47.42940944822399, 19.164927652610285], 
    address: "Tülök utca 48", 
    story: `Ég a gyertya, ég,
Fénye tiszta, szép,
Hozzon békét, szeretetet,
Minden szívbe fényt.`,
    showOnDay: 4 
  },
  { 
    name: "5. Adventi Ablak", 
    coords: [47.43260325377274, 19.161763139117895], 
    address: "1194 Hamu utca 38", 
    story: `Adventi hírnök: friss fenyőág,
Lobog az első gyertyaláng!
Karácsonyt várva lázban a föld,
Isteni gyermeket köszönt.`,
    showOnDay: 5 
  },
  { 
    name: "6. Adventi Ablak", 
    coords: [47.43226567022521, 19.159460625625275], 
    address: "1194 Temesvár utca 27.", 
    story: `Advent első gyertyalángja legyen ma az áldás,
mely szívünk mélyén fénylő, ragyogó lámpás
Legyen fény a sötétben, útmutató csillag,
hogy a remény ott is éljen, hol a szívek hallgatnak.`,
    showOnDay: 6 
  },
  { 
    name: "7. Adventi Ablak", 
    coords: [47.42890816600204, 19.163899167953517], 
    address: "Beszterce u. 23", 
    story: `Amikor a fák gyümölcsöt teremnek,
tudhatjátok, hogy közel van a nyár.
Tűzre dobhatsz, Kertész, mert nem terem meg
korcs ágaimon más, mint a halál?`,
    showOnDay: 7 
  },
  { 
    name: "8. Adventi Ablak", 
    coords: [47.433177162479495, 19.16300472174581], 
    address: "1194 Bp Újvidék utca 6.", 
    story: `Advent első gyertyája ég,
csendben hív a tiszta fény.
Világítson minden szívben,
hogy reményt hozzon az ég.`,
    showOnDay: 8 
  },
  { 
    name: "9. Adventi Ablak", 
    coords: [47.43227973455926, 19.169274550581278], 
    address: "1194 Bp, Kolozsvár utca 57.", 
    story: `Advent első vasárnapján
meggyújtjuk a gyertyát,
Összegyűlik sok jó ember
családtag és barát.`,
    showOnDay: 9 
  },
  { 
    name: "10. Adventi Ablak", 
    coords: [47.43495158766229, 19.164053425625386], 
    address: "1194 Budapest Csíky utca 29", 
    story: `Ég a gyertya, ég,
Fénye tiszta, szép,
Hozzon békét, szeretetet,
Minden szívbe fényt.`,
    showOnDay: 10 
  }
];

  // 3. Távolságszámító funkció
    function calculateDistance(coords1, coords2) {
      const R = 6371e3; // Föld sugara méterben
      const lat1 = coords1[0] * Math.PI / 180;
      const lat2 = coords2[0] * Math.PI / 180;
      const deltaLat = (coords2[0] - coords1[0]) * Math.PI / 180;
      const deltaLon = (coords2[1] - coords1[1]) * Math.PI / 180;

      const a = Math.sin(deltaLat / 2) * Math.sin(deltaLat / 2) +
                Math.cos(lat1) * Math.cos(lat2) *
                Math.sin(deltaLon / 2) * Math.sin(deltaLon / 2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

      return R * c; // Távolság méterben
    }

    // 4. Geolokáció figyelése
    navigator.geolocation.watchPosition(
      (position) => {
        const userCoords = [position.coords.latitude, position.coords.longitude];


  // Ellenőrizze a helyszínek távolságát
        locations.forEach(location => {
          const distance = calculateDistance(userCoords, location.coords);
          if (distance <= 5) {
            // Ha közel van, megjeleníti a popupot
            const marker = L.marker(location.coords, { icon: customIcon }).addTo(map);
            marker.bindPopup(`
              <div style="font-family: 'Arial', sans-serif; line-height: 1.6; max-width: 300px;">
                <h3 style="color: #6BA3BE;">${location.name}</h3>
                <p><strong>Cím:</strong> ${location.address}</p>
                <p style="font-style: italic;">${location.story}</p>
              </div>
            `).openPopup();
          }
        });
      },
      (error) => {
        console.error("Helymeghatározási hiba: ", error);
      },
      { enableHighAccuracy: true }
    );


  // Egyedi ikon definiálása
  const customIcon = L.icon({
    iconUrl: 'custom-icon.png',
    iconSize: [32, 32],
    iconAnchor: [16, 32],
    popupAnchor: [0, -32]
  });

  // Helyszínek hozzáadása a térképhez, a dátum alapján
  locations.forEach(location => {
  if (location.showOnDay <= currentDay) {
    const marker = L.marker(location.coords, { icon: customIcon }).addTo(map);
    marker.bindPopup(`
      <div style="font-family: 'Arial', sans-serif; line-height: 1.6; max-width: 300px;">
        <img src="karacsony.jpg" alt="Karácsonyi kép" style="width: 100%; border-radius: 10px; margin-bottom: 10px;">
        <h3 style="color: #6BA3BE; margin-bottom: 10px;">${location.name}</h3>
        <p><strong>Cím:</strong> ${location.address}</p>
        <hr style="border: 0; height: 1px; background: #ddd; margin: 10px 0;">
        <p style="font-style: italic;">${location.story}</p>
      </div>
    `);
  }
});
</script>


</body>
</html>
